<script src="js/d3.v3.min.js"></script>
<script>
var MAX = 108;

var createData = function () {
    var data = [];
    for (var i = 0; i < MAX; i ++) {
        data.push({
            cx: Math.random() * 400,
            cy: Math.random() * 400,
            r: Math.random() * 20
        });
    }
    return data;
};

var circle;

var init = function () {
    var data = createData();
    var circle = d3.select('body').append('svg').selectAll('circle').data(data);
    circle.enter().append('circle');
}

var DURATION = 800;

var updateData = function () {
    var data = createData();
    var circle = d3.select('svg').selectAll('circle').data(data);
    circle
        .transition()
        .duration(DURATION)
        .attr('cx', function (d) { return d.cx + 100; })
        .attr('cy', function (d) { return d.cy + 100; })
        .attr('r', function(d) { return d.r + 4; });
};
</script>
<body onload="init(); updateData(); ">
  <a href="#" onclick="updateData(); return false;">d3 test</a>
</body>
